use dep::bignum::{RuntimeBigNum, params::BigNumParams, utils::u60_representation::U60Repr};

// These commented-out structs are copied from the bignum lib, to demonstrate that
// the elements of RuntimeBigNum are not slices nor references:

// pub struct RuntimeBigNum<let N: u32, let MOD_BITS: u32> {
//     pub limbs: [Field; N],
//     pub params: BigNumParams<N, MOD_BITS>,
// }
// pub struct BigNumParams<let N: u32, let MOD_BITS: u32> {
//     pub has_multiplicative_inverse: bool,
//     pub modulus: [Field; N],
//     pub modulus_u60: U60Repr<N, 2>,
//     pub modulus_u60_x4: U60Repr<N, 4>,
//     pub double_modulus: [Field; N],
//     pub redc_param: [Field; N],
// }
// pub struct U60Repr<let N: u32, let NumSegments: u32> {
//     pub(crate) limbs: [u64; N * NumSegments],
// }

type MyRuntimeBigNum = RuntimeBigNum<18, 2048>; 

fn main(_x: MyRuntimeBigNum) {
    let mut x = _x;
    for _i in 0..50 {
        x = x * (x + x) / (x * x);
    }
}

#[test]
fn test_2048() {
    let params = MY_RUNTIME_BIGNUM_PARAMS;
    let a: MyRuntimeBigNum = RuntimeBigNum::__derive_from_seed(params, [1, 2, 3, 4]);
    main(a);
}

comptime global MY_RUNTIME_BIGNUM_PARAMS: BigNumParams<18, 2048> = BigNumParams {
    has_multiplicative_inverse: false,
    modulus: [
        0x0000000000000000000000000000000000c0a197a5ae0fcdceb052c9732614fe,
        0x0000000000000000000000000000000000656ae034423283422243918ab83be3,
        0x00000000000000000000000000000000006bf590da48a7c1070b7d5aabaac678,
        0x00000000000000000000000000000000000cce39f530238b606f24b296e2bda9,
        0x000000000000000000000000000000000001e1fef9bb9c1c3ead98f226f1bfa0,
        0x0000000000000000000000000000000000ad8c1c816e12e0ed1379055e373abf,
        0x0000000000000000000000000000000000cebe80e474f753aa9d1461c435123d,
        0x0000000000000000000000000000000000aee5a18ceedef88d115a8b93c167ad,
        0x0000000000000000000000000000000000268ba83c4a65c4307427fc495d9e44,
        0x0000000000000000000000000000000000dd2777926848667b7df79f342639d4,
        0x0000000000000000000000000000000000f455074c96855ca0068668efe7da3d,
        0x00000000000000000000000000000000005ddba6b30bbc168bfb3a1225f27d65,
        0x0000000000000000000000000000000000591fec484f36707524133bcd6f4258,
        0x000000000000000000000000000000000059641b756766aeebe66781dd01d062,
        0x000000000000000000000000000000000058bc5eaff4b165e142bf9e2480eebb,
        0x0000000000000000000000000000000000667a3964f08e06df772ce64b229a72,
        0x00000000000000000000000000000000009c1fdb18907711bfe3e3c1cf918395,
        0x00000000000000000000000000000000000000000000000000000000000000b8,
    ],
    double_modulus: [
        0x0181432f4b5c1f9b9d60a592e64c29fc,
        0x01cad5c06884650684448723157077c6,
        0x01d7eb21b4914f820e16fab557558cef,
        0x01199c73ea604716c0de49652dc57b51,
        0x0103c3fdf37738387d5b31e44de37f3f,
        0x015b183902dc25c1da26f20abc6e757d,
        0x019d7d01c8e9eea7553a28c3886a247a,
        0x015dcb4319ddbdf11a22b5172782cf5a,
        0x014d17507894cb8860e84ff892bb3c88,
        0x01ba4eef24d090ccf6fbef3e684c73a7,
        0x01e8aa0e992d0ab9400d0cd1dfcfb47a,
        0x01bbb74d6617782d17f674244be4faca,
        0x01b23fd8909e6ce0ea4826779ade84af,
        0x01b2c836eacecd5dd7cccf03ba03a0c3,
        0x01b178bd5fe962cbc2857f3c4901dd75,
        0x01ccf472c9e11c0dbeee59cc964534e3,
        0x01383fb63120ee237fc7c7839f230729,
        0x0170,
    ],
    modulus_u60: U60Repr {
        limbs: [
            1058436937605846270,
            867533891523640540,
            153759629660666851,
            456743741275973684,
            507637211389937272,
            486205199909288976,
            31284071869103529,
            57671168680933558,
            1057669653304819616,
            8479363271606723,
            942229811013040831,
            781587600470257166,
            764789921859047997,
            931092896005715258,
            941633352623024045,
            787666047433830280,
            32695061814550084,
            173593660756483139,
            828090169652820436,
            995989829823268455,
            1836635119934013,
            1100374146487440842,
            863347603192053093,
            422698909584572776,
            370442216921842264,
            401381961810274055,
            857486586516983906,
            402581472381659886,
            90845628438998715,
            399630605048551006,
            1114408800412146290,
            461517352795168877,
            1145009151832851349,
            703121955796513051,
            184,
            0,
        ],
    },
    modulus_u60_x4: U60Repr {
        limbs: [
            1058436937605846270,
            867533891523640540,
            153759629660666851,
            456743741275973684,
            507637211389937272,
            486205199909288976,
            31284071869103529,
            57671168680933558,
            1057669653304819616,
            8479363271606723,
            942229811013040831,
            781587600470257166,
            764789921859047997,
            931092896005715258,
            941633352623024045,
            787666047433830280,
            32695061814550084,
            173593660756483139,
            828090169652820436,
            995989829823268455,
            1836635119934013,
            1100374146487440842,
            863347603192053093,
            422698909584572776,
            370442216921842264,
            401381961810274055,
            857486586516983906,
            402581472381659886,
            90845628438998715,
            399630605048551006,
            1114408800412146290,
            461517352795168877,
            1145009151832851349,
            703121955796513051,
            184,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
        ],
    },
    redc_param: [
        0x000000000000000000000000000000000091697def7100cd5cf8d890b4ef2ec3,
        0x00000000000000000000000000000000006765ba8304214dac764d3f4adc3185,
        0x000000000000000000000000000000000048404bd14d927ea230e60d4bebf940,
        0x00000000000000000000000000000000007c4d53a23bacc251ecbfc4b7ba5a0b,
        0x000000000000000000000000000000000093eaf3499474a6f5b2fff83f1259c8,
        0x00000000000000000000000000000000005bff4c737b97281f1a5f2384a8c16d,
        0x000000000000000000000000000000000061b4cf2f55358476b5323782999055,
        0x00000000000000000000000000000000001e7a804e8eacfe3a2a5673bc3885b8,
        0x0000000000000000000000000000000000eabadeae4282906c817adf70eab4ae,
        0x0000000000000000000000000000000000166f7df257fe2bf27f0809aceed9b0,
        0x00000000000000000000000000000000007d90fb7428901b8bed11f6b81e36bf,
        0x0000000000000000000000000000000000f36e6ba885c60b7024c563605df7e0,
        0x000000000000000000000000000000000052b7c58d2fb5d2c8478963ae6d4a44,
        0x000000000000000000000000000000000036ee761de26635f114ccc3f7d74f85,
        0x0000000000000000000000000000000000e3fb726a10cf2220897513f05243de,
        0x0000000000000000000000000000000000f43a26bbd732496eb4d828591b8056,
        0x0000000000000000000000000000000000ff4e42304e60fb3a54fca735499f2c,
        0x0000000000000000000000000000000000000000000000000000000000000162,
    ],
};
